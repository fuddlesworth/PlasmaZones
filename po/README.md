# Translations

PlasmaZones uses [KI18n](https://api.kde.org/frameworks/ki18n/html/) (Gettext) for internationalization. There are three translation domains:

| Domain              | Used by                          |
|---------------------|----------------------------------|
| `plasmazonesd`      | Daemon, overlay, zone selector   |
| `plasmazones-editor`| Layout editor                    |
| `kcm_plasmazones`   | System Settings (KCM) module     |

## Directory layout

```
po/
  <domain>.pot              # Templates (generated by extract-pot)
  <lang>/
    <domain>.po             # Translations, e.g. de/plasmazonesd.po
```

Examples: `po/plasmazonesd.pot`, `po/de/plasmazonesd.pot`, `po/fr/plasmazones-editor.po`.

## Extracting strings

After changing user-visible strings in C++ or QML, update the `.pot` files:

```bash
cd build
cmake --build . --target extract-pot
```

This writes `po/plasmazonesd.pot`, `po/plasmazones-editor.pot`, and `po/kcm_plasmazones.pot`. Commit them so translators can merge updates.

Requires: `gettext` (xgettext, msgcat).

## Adding or updating a translation

1. **New language** (e.g. German):

   ```bash
   mkdir -p po/de
   msginit -l de -i po/plasmazonesd.pot -o po/de/plasmazonesd.po
   msginit -l de -i po/plasmazones-editor.pot -o po/de/plasmazones-editor.po
   msginit -l de -i po/kcm_plasmazones.pot -o po/de/kcm_plasmazones.po
   ```

2. **Refresh existing .po** after `extract-pot`:

   ```bash
   msgmerge --update --backup=none po/de/plasmazonesd.po po/plasmazonesd.pot
   ```

3. Edit the `.po` files (e.g. with [Lokalize](https://apps.kde.org/lokalize/) or any Gettext editor).

4. Build and install: `.po` files are compiled to `.mo` and installed to `share/locale/<lang>/LC_MESSAGES/` by the normal build.

## Build and install

- `KI18N_INSTALL(po)` in the root `CMakeLists.txt` compiles `po/**/*.po` to `.mo` and installs them.  
- If the `po/` directory is missing or contains no `.po` files, the install step simply does nothing.
